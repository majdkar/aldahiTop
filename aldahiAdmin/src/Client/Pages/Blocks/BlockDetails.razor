@page "/block-details/{Id:int}"
@inject Microsoft.Extensions.Localization.IStringLocalizer<Blocks> localizer
@*<style>
    .mud-dialog-container {
        overflow: scroll;
    }
    .tox-tinymce {
        max-height:250px;
    }
</style>*@


<MudGrid>
    <MudItem xs="12" sm="8" md="9">
        <EditForm Model="@BlockModel" OnValidSubmit="SaveAsync">
            <FluentValidationValidator />
            <MudCard Elevation="4">
                <MudCardHeader>
                    <CardHeaderAvatar>
                        <MudAvatar Color="Color.Secondary">
                            @if (BlockModel.Id == 0)
                            {
                                <MudIcon Icon="@Icons.Outlined.Add" />
                            }
                            else
                            {
                                <MudIcon Icon="@Icons.Outlined.PublishedWithChanges" />
                            }
                        </MudAvatar>
                    </CardHeaderAvatar>
                    <CardHeaderContent>
                        @if (BlockModel.Id == 0)
                        {
                            <MudText Typo="Typo.body1">@localizer["AddBlock"]</MudText>
                        }
                        else
                        {
                            <MudText Typo="Typo.body1">@localizer["UpdateBlock"]</MudText>
                        }
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardContent>
                    <MudGrid>

                        <MudItem xs="12" md="6">
                            <MudTextField For="@(() => BlockModel.Name)" @bind-Value="BlockModel.Name" Label="@localizer["Arabic Name"]" Variant="Variant.Outlined" />
                        </MudItem>
                        <MudItem xs="12" md="6">
                            <MudTextField For="@(() => BlockModel.EnglishName)" @bind-Value="BlockModel.EnglishName" Label="@localizer["English Name"]" Variant="Variant.Outlined" />
                        </MudItem>

                        <MudItem xs="12" md="12">
                            <div class="fa-object-group">
                                <label class="fa-alipay">@localizer["Arabic Description"]</label>

                                <Editor Id="editorAr" Field="() => BlockModel.Description1" @bind-Value="BlockModel.Description1" Inline=false
                                        Conf="@editorAr.tinymc" ScriptSrc="/tinymce/tinymce.min.js" ClassName="tinymce-wrapper" />

                            </div>
                        </MudItem>


                        <MudItem xs="12" md="12">
                            <div class="fa-object-group">
                                <label class="fa-alipay">@localizer["English Description"]</label>
                                <Editor Id="editorEn" Field="() => BlockModel.EnglishDescription1" @bind-Value="BlockModel.EnglishDescription1" Inline=false
                                        Conf="@editorEn.tinymc" ScriptSrc="/tinymce/tinymce.min.js" ClassName="tinymce-wrapper" />

                            </div>
                        </MudItem>


                        <MudItem xs="12" md="12">
                            <div class="fa-object-group">
                                <label class="fa-alipay">@localizer["Arabic Description 2"]</label>

                                <Editor Id="editorAr2" Field="() => BlockModel.Description2" @bind-Value="BlockModel.Description2" Inline=false
                                        Conf="@editorAr2.tinymc" ScriptSrc="/tinymce/tinymce.min.js" ClassName="tinymce-wrapper" />

                            </div>
                        </MudItem>


                        <MudItem xs="12" md="12">
                            <div class="fa-object-group">
                                <label class="fa-alipay">@localizer["English Description 2"]</label>
                                <Editor Id="editorEn2" Field="() => BlockModel.EnglishDescription2" @bind-Value="BlockModel.EnglishDescription2" Inline=false
                                        Conf="@editorEn2.tinymc" ScriptSrc="/tinymce/tinymce.min.js" ClassName="tinymce-wrapper" />

                            </div>
                        </MudItem>


                        <MudItem xs="12" md="12">
                            <div class="fa-object-group">
                                <label class="fa-alipay">@localizer["Arabic Description 3"]</label>

                                <Editor Id="editorAr3" Field="() => BlockModel.Description3" @bind-Value="BlockModel.Description3" Inline=false
                                        Conf="@editorAr3.tinymc" ScriptSrc="/tinymce/tinymce.min.js" ClassName="tinymce-wrapper" />

                            </div>
                        </MudItem>


                        <MudItem xs="12" md="12">
                            <div class="fa-object-group">
                                <label class="fa-alipay">@localizer["English Description 3"]</label>
                                <Editor Id="editorEn3" Field="() => BlockModel.EnglishDescription3" @bind-Value="BlockModel.EnglishDescription3" Inline=false
                                        Conf="@editorEn3.tinymc" ScriptSrc="/tinymce/tinymce.min.js" ClassName="tinymce-wrapper" />

                            </div>
                        </MudItem>


                        <MudItem xs="12" md="12">
                            <div class="fa-object-group">
                                <label class="fa-alipay">@localizer["Arabic Description 4"]</label>

                                <Editor Id="editorAr4" Field="() => BlockModel.Description4" @bind-Value="BlockModel.Description4" Inline=false
                                        Conf="@editorAr4.tinymc" ScriptSrc="/tinymce/tinymce.min.js" ClassName="tinymce-wrapper" />

                            </div>
                        </MudItem>


                        <MudItem xs="12" md="12">
                            <div class="fa-object-group">
                                <label class="fa-alipay">@localizer["English Description 4"]</label>
                                <Editor Id="editorEn4" Field="() => BlockModel.EnglishDescription4" @bind-Value="BlockModel.EnglishDescription4" Inline=false
                                        Conf="@editorEn4.tinymc" ScriptSrc="/tinymce/tinymce.min.js" ClassName="tinymce-wrapper" />

                            </div>
                        </MudItem>

                        @if (showLdatenews)
                        {
                            <MudItem xs="12" md="6">
                                <MudDatePicker For="@(() => BlockModel.NewDate)" @bind-Date="BlockModel.NewDate" Label="@localizer["NewDate"]" DisableToolbar="true" AutoClose="true" Elevation="12" Variant="Variant.Outlined" />
                            </MudItem>
                        }
                        @if (showdatesevent)
                        {
                            <MudItem xs="12" md="6">
                                <MudDatePicker For="@(() => BlockModel.StartDate)" @bind-Date="BlockModel.StartDate" Label="@localizer["StartDate"]" DisableToolbar="true" AutoClose="true" Elevation="12" Variant="Variant.Outlined" />
                            </MudItem>

                            <MudItem xs="12" md="6">
                                <MudDatePicker For="@(() => BlockModel.EndDate)" @bind-Date="BlockModel.EndDate" Label="@localizer["EndDate"]" DisableToolbar="true" AutoClose="true" Elevation="12" Variant="Variant.Outlined" />
                            </MudItem>
                        }
                        @if (showdatesactivity)
                        {
                            <MudItem xs="12" md="6">
                                <MudDatePicker For="@(() => BlockModel.StartDate)" @bind-Date="BlockModel.StartDate" Label="@localizer["StartDate"]" DisableToolbar="true" AutoClose="true" Elevation="12" Variant="Variant.Outlined" />
                            </MudItem>

                            <MudItem xs="12" md="6">
                                <MudDatePicker For="@(() => BlockModel.EndDate)" @bind-Date="BlockModel.EndDate" Label="@localizer["EndDate"]" DisableToolbar="true" AutoClose="true" Elevation="12" Variant="Variant.Outlined" />
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <MudDatePicker For="@(() => BlockModel.StarRegistertDate)" @bind-Date="BlockModel.StarRegistertDate" Label="@localizer["StarRegistertDate"]" DisableToolbar="true" AutoClose="true" Elevation="12" Variant="Variant.Outlined" />
                            </MudItem>

                            <MudItem xs="12" md="6">
                                <MudDatePicker For="@(() => BlockModel.EndRegisterDate)" @bind-Date="BlockModel.EndRegisterDate" Label="@localizer["EndRegisterDate"]" DisableToolbar="true" AutoClose="true" Elevation="12" Variant="Variant.Outlined" />
                            </MudItem>
                        }
                        @if (showLarticals)
                        {
                            <MudItem xs="12" md="6">
                                <MudDatePicker For="@(() => BlockModel.ArticleDate)" @bind-Date="BlockModel.ArticleDate" Label="@localizer["ArticleDate"]" DisableToolbar="true" AutoClose="true" Elevation="12" Variant="Variant.Outlined" />
                            </MudItem>
                            <MudItem xs="12" md="12">
                                <MudTextField For="@(() => BlockModel.Author)" @bind-Value="BlockModel.Author" Label="@localizer["Author"]" Variant="Variant.Outlined" />
                            </MudItem>
                        }
                        <MudItem xs="12" md="6">
                            <MudTextField For="@(() => BlockModel.Url)" @bind-Value="BlockModel.Url" Label="@localizer["Url"]" Variant="Variant.Outlined" />
                        </MudItem>
                        <MudItem xs="12" md="6">
                            <MudTextField For="@(() => BlockModel.Url1)" @bind-Value="BlockModel.Url1" Label="@localizer["URL"]" Variant="Variant.Outlined" />
                        </MudItem>
                        <MudItem xs="12" md="6">
                            <MudNumericField For="@(() => BlockModel.RecordOrder)" @bind-Value="BlockModel.RecordOrder" Label="@localizer["RecordOrder"]" Variant="Variant.Outlined" Min="0" />
                        </MudItem>

                        @if (categories != null)
                        {
                            @if (BlockModel.Id != 0)
                            {
                                var selectedCategory = categories.FirstOrDefault(c => c.Id == BlockModel.CategoryId);
                                <MudItem xs="12" md="6">

                                    @if (selectedCategory != null)
                                    {
                                        <MudTextField T="string" Label="@localizer["Category"]" Value="@selectedCategory.Name" Disabled="true" Variant="Variant.Outlined" />
                                    }

                                </MudItem>
                            }
                            else
                            {
                                <MudItem xs="12" md="6">

                                    <MudSelect @bind-Value="BlockModel.CategoryId" T="int" Label="@localizer["Category"]" AnchorOrigin="Origin.BottomCenter" Variant="Variant.Outlined">
                                        @foreach (var category in categories)
                                        {
                                            <MudSelectItem T="int" Value="@category.Id">@category.Name</MudSelectItem>
                                        }
                                    </MudSelect>

                                </MudItem>
                            }
                        }

                        <MudItem xs="12" md="6">
                            <MudCheckBox For="@(() => BlockModel.IsVisible)" @bind-Checked="BlockModel.IsVisible" Label="@localizer["IsVisible"]" />
                        </MudItem>

                        <MudItem xs="12" md="6">
                            <MudCheckBox For="@(() => BlockModel.IsActive)" @bind-Checked="BlockModel.IsActive" Label="@localizer["IsActive"]" />
                        </MudItem>
                    </MudGrid>
                </MudCardContent>
                <MudCardActions Class="d-flex justify-end flex-grow-1 gap-4 mr-2">
                    <MudButton DisableElevation Variant="Variant.Filled" ButtonType="ButtonType.Button" Class="mr-2" OnClick="Cancel">@localizer["Cancel"]</MudButton>
                    @if (BlockModel.Id != 0)
                    {
                        <LoadingButton IsProcessing="@isProcessing" ButtonText="@localizer["Update"]" DisableElevation Variant="Variant.Filled" ButtonType="ButtonType.Submit" Color="Color.Primary"></LoadingButton>
                    }
                    else
                    {
                        <LoadingButton IsProcessing="@isProcessing" ButtonText="@localizer["Save"]" DisableElevation Variant="Variant.Filled" ButtonType="ButtonType.Submit" Color="Color.Primary"></LoadingButton>
                    }
                </MudCardActions>
            </MudCard>
        </EditForm>
    </MudItem>







    <MudItem xs="12" sm="4" md="3">


        <MudCard Elevation="4" Class="mb-5">
            <MudCardHeader>
                <CardHeaderAvatar>
                    <MudAvatar Color="Color.Secondary">
                        <MudIcon Icon="@Icons.Outlined.InsertPhoto" />
                    </MudAvatar>
                </CardHeaderAvatar>
                <CardHeaderContent>
                    <MudText Typo="Typo.body1">@localizer["BlockPhoto"]</MudText>
                </CardHeaderContent>
            </MudCardHeader>
            @if (!string.IsNullOrEmpty(@imageUrlForPreview))
            {
                <MudCardMedia Align="center" Class="ml-2 mr-2 rounded-lg" Image="@imageUrlForPreview" Height="250" />
            }
            else
            {
                <MudCardMedia Align="center" Class="ml-2 mr-2 rounded-lg" Image="@noImageUrl" Height="250" />
            }
            <MudCardActions>
                <InputFile id="imageInput" OnChange="SelectImage" hidden />
                <MudIconButton id="imageInputButton"
                               HtmlTag="label"
                               Variant="Variant.Text"
                               Color="Color.Primary"
                               Size="Size.Small"
                               for="imageInput"
                               Icon="@Icons.Outlined.Add">
                    @localizer["UploadImage"]
                </MudIconButton>
                <MudIconButton Icon="@Icons.Filled.DeleteOutline" Color="Color.Error" OnClick="DeleteImage" Disabled="@disableDeleteImageButton" />
            </MudCardActions>
        </MudCard>


        @*-------------------------------image2----------------------*@

        <MudCard Elevation="4" Class="mb-5">
            <MudCardHeader>
                <CardHeaderAvatar>
                    <MudAvatar Color="Color.Secondary">
                        <MudIcon Icon="@Icons.Outlined.InsertPhoto" />
                    </MudAvatar>
                </CardHeaderAvatar>
                <CardHeaderContent>
                    <MudText Typo="Typo.body1">@localizer["BlockPhoto 2"]</MudText>
                </CardHeaderContent>
            </MudCardHeader>
            @if (!string.IsNullOrEmpty(@imageUrlForPreview2))
            {
                <MudCardMedia Align="center" Class="ml-2 mr-2 rounded-lg" Image="@imageUrlForPreview2" Height="250" />
            }
            else
            {
                <MudCardMedia Align="center" Class="ml-2 mr-2 rounded-lg" Image="@noImageUrl" Height="250" />
            }
            <MudCardActions>
                <InputFile id="imageInput2" OnChange="SelectImage2" hidden />
                <MudIconButton id="imageInputButton"
                               HtmlTag="label"
                               Variant="Variant.Text"
                               Color="Color.Primary"
                               Size="Size.Small"
                               for="imageInput2"
                               Icon="@Icons.Outlined.Add">
                    @localizer["UploadImage"]
                </MudIconButton>
                <MudIconButton Icon="@Icons.Filled.DeleteOutline" Color="Color.Error" OnClick="DeleteImage2" Disabled="@disableDeleteImageButton2" />
            </MudCardActions>
        </MudCard>


        @*-------------------------------image3----------------------*@

        <MudCard Elevation="4" Class="mb-5">
            <MudCardHeader>
                <CardHeaderAvatar>
                    <MudAvatar Color="Color.Secondary">
                        <MudIcon Icon="@Icons.Outlined.InsertPhoto" />
                    </MudAvatar>
                </CardHeaderAvatar>
                <CardHeaderContent>
                    <MudText Typo="Typo.body1">@localizer["BlockPhoto 3"]</MudText>
                </CardHeaderContent>
            </MudCardHeader>
            @if (!string.IsNullOrEmpty(@imageUrlForPreview3))
            {
                <MudCardMedia Align="center" Class="ml-2 mr-2 rounded-lg" Image="@imageUrlForPreview3" Height="250" />
            }
            else
            {
                <MudCardMedia Align="center" Class="ml-2 mr-2 rounded-lg" Image="@noImageUrl" Height="250" />
            }
            <MudCardActions>
                <InputFile id="imageInput3" OnChange="SelectImage3" hidden />
                <MudIconButton id="imageInputButton"
                               HtmlTag="label"
                               Variant="Variant.Text"
                               Color="Color.Primary"
                               Size="Size.Small"
                               for="imageInput3"
                               Icon="@Icons.Outlined.Add">
                    @localizer["UploadImage"]
                </MudIconButton>
                <MudIconButton Icon="@Icons.Filled.DeleteOutline" Color="Color.Error" OnClick="DeleteImage3" Disabled="@disableDeleteImageButton3" />
            </MudCardActions>
        </MudCard>



        @*-------------------------------image4----------------------*@

        <MudCard Elevation="4" Class="mb-5">
            <MudCardHeader>
                <CardHeaderAvatar>
                    <MudAvatar Color="Color.Secondary">
                        <MudIcon Icon="@Icons.Outlined.InsertPhoto" />
                    </MudAvatar>
                </CardHeaderAvatar>
                <CardHeaderContent>
                    <MudText Typo="Typo.body1">@localizer["BlockPhoto 4"]</MudText>
                </CardHeaderContent>
            </MudCardHeader>
            @if (!string.IsNullOrEmpty(@imageUrlForPreview4))
            {
                <MudCardMedia Align="center" Class="ml-2 mr-2 rounded-lg" Image="@imageUrlForPreview4" Height="250" />
            }
            else
            {
                <MudCardMedia Align="center" Class="ml-2 mr-2 rounded-lg" Image="@noImageUrl" Height="250" />
            }
            <MudCardActions>
                <InputFile id="imageInput4" OnChange="SelectImage4" hidden />
                <MudIconButton id="imageInputButton"
                               HtmlTag="label"
                               Variant="Variant.Text"
                               Color="Color.Primary"
                               Size="Size.Small"
                               for="imageInput4"
                               Icon="@Icons.Outlined.Add">
                    @localizer["UploadImage"]
                </MudIconButton>
                <MudIconButton Icon="@Icons.Filled.DeleteOutline" Color="Color.Error" OnClick="DeleteImage4" Disabled="@disableDeleteImageButton4" />
            </MudCardActions>
        </MudCard>

        <MudCard Elevation="4">
            <MudCardHeader>
                <CardHeaderAvatar>
                    <MudAvatar Color="Color.Secondary">
                        <MudIcon Icon="@Icons.Material.Filled.Attachment" />
                    </MudAvatar>
                </CardHeaderAvatar>
                <CardHeaderContent>
                    <MudText Typo="Typo.body1">@localizer["BlockFile"]</MudText>
                </CardHeaderContent>
            </MudCardHeader>
            <div class="d-flex justify-center mb-2">
                @if (!string.IsNullOrEmpty(@BlockModel.File))
                {
                    <MudButton Link=@(BlockModel.File) Align="center" Class="ml-2 mr-2" Target="_blank" StartIcon="@Icons.Material.Filled.FileDownload" Size="Size.Small" Variant="Variant.Outlined" Color="Color.Primary">@localizer["DownloadAttachment"]</MudButton>
                }
                else
                {
                    <MudButton Variant="Variant.Filled" Align="center" FullWidth=true Class="ml-2 mr-2" Disabled StartIcon="@Icons.Material.Filled.FileDownload" Size="Size.Small" Color="Color.Default">@localizer["NoAttachment"]</MudButton>
                }
            </div>
            @if (_files != null)
            {
                <MudList id="FilesList">
                    @foreach (var file in _files)
                    {
                        <MudListItem Icon="@Icons.Filled.AttachFile" @key="@file">
                            @file.Name
                        </MudListItem>
                    }
                </MudList>
            }
            <MudCardActions>
                <InputFile id="fileInput" OnChange="SelectFile" hidden />
                <MudIconButton id="fileInputButton"
                               HtmlTag="label"
                               Variant="Variant.Text"
                               Color="Color.Primary"
                               Size="Size.Small"
                               Icon="@Icons.Material.Filled.UploadFile"
                               for="fileInput">
                    @localizer["UploadFile"]
                </MudIconButton>
                <MudIconButton Icon="@Icons.Filled.DeleteOutline" Color="Color.Error" OnClick="DeleteFile" Disabled="@disableDeleteFileButton" />
            </MudCardActions>
        </MudCard>
    </MudItem>

</MudGrid>












